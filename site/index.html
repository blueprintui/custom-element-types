<!doctype html>
<html lang="en">
<head>
  <title></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Directory of example Clarity Design demos.">
  <meta name="keywords" content="HTML, CSS, JavaScript, Clarity Design">
  <link rel="dns-prefetch" href="//cdn.skypack.dev">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://unpkg.com/@cds/core@6.0.0-next.3/global.min.css">
  <link rel="stylesheet" href="https://unpkg.com/@cds/core@6.0.0-next.3/list/list.min.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="https://unpkg.com/@cds/core@6.0.0-next.3/styles/theme.dark.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="https://unpkg.com/@cds/city@1.1.0/css/bundles/default.min.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="./prism.css" media="print" onload="this.media='all'" />
  <noscript><style>:not(:defined) { visibility: visible }</style></noscript>
  <style>
    :not(:defined) {
      visibility: hidden
    }

    [cds-theme='dark'] pre {
      background: var(--cds-global-color-construction-900);
    }

    [cds-theme='dark'] cds-alert-group a {
      color: var(--cds-global-color-gray-0) !important; /* temp fix */
    }

    body {
      padding: 0;
    }

    main {
      padding: 36px 24px 36px 64px;
    }

    main[expanded] {
      padding: 36px 24px 24px 264px;
      z-index: -1;
    }

    cds-navigation {
      box-shadow: var(--cds-alias-object-shadow-300);
      overflow: auto;
      position: fixed;
      inset: 0 auto 0 0;
      z-index: 999;
    }

    cds-navigation:not([expanded]) cds-navigation-start svg {
      display: none;
    }

    pre {
      border: var(--cds-alias-object-border-width-100) solid var(--cds-alias-object-interaction-border-color);
      background: var(--cds-global-color-construction-50);
      padding: var(--cds-global-space-6);
      overflow: auto;
      width: 100%;
      margin: 0;
      height: 65vh !important;
    }

    cds-textarea textarea {
      height: 200px;
    }
  </style>
</head>
<body cds-text="body" cds-theme="dark">
  <cds-navigation expanded>
    <cds-navigation-start></cds-navigation-start>
    <cds-navigation-item>
      <a href="https://github.com/coryrylan/custom-element-types" target="_blank" rel="noopener">
        <cds-icon shape="search"></cds-icon> Documentation
      </a>
    </cds-navigation-item>
    <cds-navigation-item>
      <a href="https://github.com/coryrylan/custom-element-types" target="_blank" rel="noopener">
        <cds-icon shape="bug"></cds-icon> Github
      </a>
    </cds-navigation-item>
    <cds-navigation-item>
      <button id="about-button">
        <cds-icon shape="info-standard"></cds-icon> About
      </button>
    </cds-navigation-item>
  </cds-navigation>
  <main expanded>
    <div cds-layout="vertical gap:xl">
      <div cds-layout="vertical gap:lg align:stretch">
        <h1 cds-text="heading">Custom Element Types</h1>
        <h2 cds-text="subsection">Framework Type Generator for Web Components</h2>
      </div>

      <p cds-text="body" cds-layout="container:lg">
        The Custom Element Types generator will use a <code cds-text="code">custom-elements.json</code> file to generate
        a specific type definition files or shims for a given framework. This enables type checking in
        type aware templates such as TSX in React and Angular HTML templates.
        Most Web Component libraries ship with a <code cds-text="code">custom-elements.json</code>. However if not provided, a manifest can be generated using the <a href="https://custom-elements-manifest.open-wc.org/" cds-text="link">Custom Elements Manifest Generator</a>.
      </p>

      <div cds-layout="grid gap:lg align:stretch m-t:lg">
        <div cds-layout="col@lg:5 vertical gap:lg">
          <div cds-layout="vertical gap:lg m-t:md">
            <cds-input layout="vertical" >
              <label>package.json</label>
              <input type="url" id="package-input" value="https://unpkg.com/@cds/core@6.0.0-next.3/package.json" />
            </cds-input>

            <cds-radio-group layout="vertical">
              <label>Output Format</label>
              <cds-radio>
                <label>React</label>
                <input type="radio" value="react" checked />
              </cds-radio>
              <cds-radio>
                <label>Angular</label>
                <input type="radio" value="angular" />
              </cds-radio>
              <cds-radio>
                <label>Preact</label>
                <input type="radio" value="preact" />
              </cds-radio>
              <cds-radio>
                <label>TypeScript</label>
                <input type="radio" value="typescript" />
              </cds-radio>
              <cds-radio>
                <label>Blazor</label>
                <input type="radio" value="blazor" />
              </cds-radio>
            </cds-radio-group>

            <p cds-text="body" id="react-explainer">
              Add a <code cds-text="code">types.d.ts</code> file to your project <a cds-text="link" href="https://stackblitz.com/edit/http-server-noh4jj" target="_blank" rel="noopener">(React example)</a>.
            </p>
    
            <p cds-text="body" id="angular-explainer" hidden>
              Add <code cds-text="code">custom-element-types.module.ts</code> file to your project.
              Import and add <code cds-text="code">CustomElementTypeModule</code> to your app module <a cds-text="link" href="https://stackblitz.com/edit/node-1tthxz" target="_blank" rel="noopener">(Angular example)</a>.
            </p>

            <p cds-text="body" id="preact-explainer" hidden>
              Add a <code cds-text="code">types.d.ts</code> file to your project <a cds-text="link" href="https://stackblitz.com/edit/vitejs-vite-8qed1q" target="_blank" rel="noopener">(Preact example)</a>.
            </p>

            <p cds-text="body" id="typescript-explainer" hidden>
              Add a <code cds-text="code">types.d.ts</code> file to your project. If using a third party
              library it is likely this definition is already included.
            </p>
            <ul cds-text="body" id="blazor-explainer" hidden>
              <li>Add <code cds-text="code">event-handlers.js</code> to <code cds-text="code">wwwroot</code>.</li>
              <li>
                Add script tag reference to <code cds-text="code">index.html</code><br />
                <code cds-text="code">
                  &lt;script type=&quot;module&quot; src=&quot;js/event-handlers.js&quot;&gt;&lt;/script&gt;
                </code>
              </li>
              <li>
                Add <code cds-text="code">EventHandlers.cs</code> to the root of the project.
              </li>
              <li>
                <a cds-text="link" href="https://github.com/coryrylan/clarity-blazor" target="_blank" rel="noopener">(Blazor example)</a>.
              </li>
            </ul>
          </div>

          <cds-textarea layout="vertical" hidden>
            <label>Loaded Custom Elements Manifest JSON</label>
            <textarea id="manifest-textarea" readonly></textarea>
          </cds-textarea>
        </div>
        <div cds-layout="col@lg:7 vertical gap:xs">
          <cds-icon-button action="outline" size="sm" aria-label="Copy code for checking Clarity version" cds-layout="align:right" id="copy-button">
            <cds-icon shape="copy"></cds-icon>
          </cds-icon-button>
          <pre><code id="output" class="language-javascript"></code></pre>
        </div>
      </div>
    </div>
  </main>
  <cds-modal hidden>
    <cds-modal-header>
      <h3 cds-text="title">About</h3>
    </cds-modal-header>
    <cds-modal-content>
      <section cds-layout="vertical gap:lg m-b:lg">
        <p cds-text="body">
          Built and maintained by <a href="https://twitter.com/coryrylan" cds-text="link" target="_blank" rel="noopener">Cory Rylan</a> ðŸ‘‹.
        </p>
      </section>
    </cds-modal-content>
  </cds-modal>
  <script type="module">
    import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/navigation/register.js');
    import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/textarea/register.js');
    import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/input/register.js');
    import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/radio/register.js');
    import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/modal/register.js');
  </script>
  <script type="module">
    import { ClarityIcons } from 'https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/icon.service.js';

    Promise.all([
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/info-standard.js'),  
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/search.js'),
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/talk-bubbles.js'),
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/copy.js'),
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/sync.js'),
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/bug.js'),
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/exclamation-triangle.js'),
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/cog.js'),
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/code.js'),
      import('https://cdn.skypack.dev/pin/@cds/core@v6.0.0-next.3-d2lwcEFpchAwGLPwNqcg/mode=imports,min/optimized/@cds/core/icon/shapes/bundle.js')
    ]).then(([infoStandard, search, talkBubbles, copy, sync, bug, exclamationTriangle, cog, code, bundle]) => {
      ClarityIcons.addIcons(infoStandard.infoStandardIcon, search.searchIcon, talkBubbles.talkBubblesIcon, copy.copyIcon, sync.syncIcon, bug.bugIcon, exclamationTriangle.exclamationTriangleIcon, cog.cogIcon, code.codeIcon, bundle.bundleIcon);
    });
  </script>
  <script src="./prism.js" id="prism"></script>
  <script type="module" id="settings-modal">
    const modal = document.querySelector('cds-modal');
    const button = document.querySelector('#about-button');
    button.addEventListener('click', () => modal.removeAttribute('hidden'));
    modal.addEventListener('closeChange', () => modal.setAttribute('hidden', ''));
  </script>
  <script type="module" id="navigation">
    const nav = document.querySelector('cds-navigation');
    const main = document.querySelector('main');
    setNavSize();

    nav.addEventListener('expandedChange', () => {
      nav.expanded = !nav.expanded;
      nav.expanded && document.documentElement.clientWidth > 1024 ? main.setAttribute('expanded', '') : main.removeAttribute('expanded');
    });

    window.addEventListener('resize', () => setNavSize());

    function setNavSize() {
      if (document.documentElement.clientWidth > 1024) {
        main.setAttribute('expanded', '');
        nav.expanded = true;
      } else {
        main.removeAttribute('expanded');
        nav.expanded = false;
      }
    }
  </script>
  <script type="module" id="generator">
    import { generate as generateReact } from 'https://cdn.skypack.dev/custom-element-types/react.js';
    import { generate as generatePreact } from 'https://cdn.skypack.dev/custom-element-types/preact.js';
    import { generate as generateAngular } from 'https://cdn.skypack.dev/custom-element-types/angular.js';
    import { generate as generateTypeScript } from 'https://cdn.skypack.dev/custom-element-types/typescript.js';
    import { generate as generateBlazor } from 'https://cdn.skypack.dev/custom-element-types/blazor.js';
    
    const copyButton = document.querySelector('#copy-button');
    const packageInput = document.querySelector('#package-input');
    const manifestTextarea = document.querySelector('#manifest-textarea');
    const output = document.querySelector('#output');
    const radios = Array.from(document.querySelectorAll('cds-radio input'));
    const reactExplainer = document.querySelector('#react-explainer');
    const preactExplainer = document.querySelector('#preact-explainer');
    const angularExplainer = document.querySelector('#angular-explainer');
    const typescriptExplainer = document.querySelector('#typescript-explainer');
    const blazorExplainer = document.querySelector('#blazor-explainer');
    let result = '';

    const generator = {
      react: generateReact,
      preact: generatePreact,
      angular: generateAngular,
      typescript: generateTypeScript,
      blazor: generateBlazor
    };

    const explainers = {
      react: reactExplainer,
      preact: preactExplainer,
      angular: angularExplainer,
      typescript: typescriptExplainer,
      blazor: blazorExplainer
    };

    copyButton.addEventListener('click', () => {
      navigator.clipboard.writeText(result);
      copyButton.loadingState = 'success';
      setTimeout(() => copyButton.loadingState = 'default', 1000);
    });

    radios.forEach(r => r.addEventListener('change', () => generate()));
    packageInput.addEventListener('change', () => generate());

    generate();

    async function generate() {
      const framework = radios.find(r => r.checked).value;
      let packageFile;
      let customElementsManifest;

      try {
        packageFile = await fetch(packageInput.value).then(res => res.json());
        customElementsManifest = await fetch(packageInput.value.replace('package.json', packageFile.customElements.replace('./', ''))).then(res => res.json());
      } catch {
        console.error('invalid manifest');
      }

      if (customElementsManifest) {
        manifestTextarea.value = JSON.stringify(customElementsManifest, null, 2);
        result = `${generator[framework]({ customElementsManifest, entrypoint: packageFile.name }).map(file => file.src).join('\n\n')}`;
        output.innerHTML = Prism.highlight(result, Prism.languages.javascript, 'javascript');
        showExplainer(framework);
      }
    }

    function showExplainer(framework) {
      Object.keys(explainers).forEach(key => explainers[key].hidden = true);
      explainers[framework].hidden = false;
    }
  </script>
</body>
</html>